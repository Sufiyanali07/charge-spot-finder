"use strict";(self["webpackChunkev_charging_station_frontend"]=self["webpackChunkev_charging_station_frontend"]||[]).push([[975],{975:(e,t,s)=>{s.r(t),s.d(t,{default:()=>K});var a=s(768),l=s(130),n=s(232);const i={class:"station-list"},o={class:"d-flex justify-content-between align-items-center mb-4"},r={class:"card mb-4"},d={class:"card-body"},c={class:"row"},u={class:"col-md-3 mb-3"},b={class:"col-md-3 mb-3"},k={class:"col-md-3 mb-3"},p={class:"col-md-3 mb-3"},m={class:"d-flex justify-content-end"},L={key:0,class:"text-center my-5"},v={key:1,class:"alert alert-info"},g={key:2,class:"row"},h={class:"card h-100"},y={class:"card-header d-flex justify-content-between align-items-center"},f={class:"mb-0"},w={class:"card-body"},C={key:0,class:"mb-2"},_={class:"mb-2"},F={class:"mb-2"},S={key:1,class:"mb-2"},T={class:"mb-0 text-muted"},D={class:"card-footer bg-white border-top-0"},M={class:"d-flex justify-content-between"},x=["onClick"],P={key:0},W=["onClick"],E={key:3,class:"modal fade show",style:{display:"block","background-color":"rgba(0,0,0,0.5)"}},A={class:"modal-dialog"},X={class:"modal-content"},I={class:"modal-header"},V={class:"modal-body"},O={class:"modal-footer"};function U(e,t,s,U,j,Q){const $=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",o,[t[15]||(t[15]=(0,a.Lk)("h2",null,"Charging Stations",-1)),e.isLoggedIn?((0,a.uX)(),(0,a.Wv)($,{key:0,to:"/stations/new",class:"btn btn-primary",id:"addStationBtn"},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.Lk)("i",{class:"bi bi-plus-circle"},null,-1),(0,a.eW)(" Add New Station ")]))),_:1,__:[13]})):((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[0]||(t[0]=(...e)=>Q.redirectToLogin&&Q.redirectToLogin(...e)),class:"btn btn-outline-primary"},t[14]||(t[14]=[(0,a.Lk)("i",{class:"bi bi-box-arrow-in-right"},null,-1),(0,a.eW)(" Login to Add Station ")])))]),(0,a.Lk)("div",r,[t[22]||(t[22]=(0,a.Lk)("div",{class:"card-header bg-light"},[(0,a.Lk)("h5",{class:"mb-0"},"Filters")],-1)),(0,a.Lk)("div",d,[(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[t[17]||(t[17]=(0,a.Lk)("label",{for:"statusFilter",class:"form-label"},"Status",-1)),(0,a.bo)((0,a.Lk)("select",{id:"statusFilter",class:"form-select","onUpdate:modelValue":t[1]||(t[1]=e=>j.filters.status=e),onChange:t[2]||(t[2]=(...e)=>Q.applyFilters&&Q.applyFilters(...e))},t[16]||(t[16]=[(0,a.Lk)("option",{value:""},"All Statuses",-1),(0,a.Lk)("option",{value:"Active"},"Active",-1),(0,a.Lk)("option",{value:"Inactive"},"Inactive",-1),(0,a.Lk)("option",{value:"Maintenance"},"Maintenance",-1)]),544),[[l.u1,j.filters.status]])]),(0,a.Lk)("div",b,[t[19]||(t[19]=(0,a.Lk)("label",{for:"connectorFilter",class:"form-label"},"Connector Type",-1)),(0,a.bo)((0,a.Lk)("select",{id:"connectorFilter",class:"form-select","onUpdate:modelValue":t[3]||(t[3]=e=>j.filters.connectorType=e),onChange:t[4]||(t[4]=(...e)=>Q.applyFilters&&Q.applyFilters(...e))},t[18]||(t[18]=[(0,a.Fv)('<option value="" data-v-6bd332a2>All Connectors</option><option value="Type 1" data-v-6bd332a2>Type 1</option><option value="Type 2" data-v-6bd332a2>Type 2</option><option value="CCS" data-v-6bd332a2>CCS</option><option value="CHAdeMO" data-v-6bd332a2>CHAdeMO</option><option value="Tesla" data-v-6bd332a2>Tesla</option>',6)]),544),[[l.u1,j.filters.connectorType]])]),(0,a.Lk)("div",k,[t[20]||(t[20]=(0,a.Lk)("label",{for:"minPowerFilter",class:"form-label"},"Min Power (kW)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"minPowerFilter",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>j.filters.minPower=e),min:"0",onChange:t[6]||(t[6]=(...e)=>Q.applyFilters&&Q.applyFilters(...e))},null,544),[[l.Jo,j.filters.minPower]])]),(0,a.Lk)("div",p,[t[21]||(t[21]=(0,a.Lk)("label",{for:"maxPowerFilter",class:"form-label"},"Max Power (kW)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"maxPowerFilter",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>j.filters.maxPower=e),min:"0",onChange:t[8]||(t[8]=(...e)=>Q.applyFilters&&Q.applyFilters(...e))},null,544),[[l.Jo,j.filters.maxPower]])])]),(0,a.Lk)("div",m,[(0,a.Lk)("button",{class:"btn btn-secondary",onClick:t[9]||(t[9]=(...t)=>e.resetFilters&&e.resetFilters(...t))}," Reset Filters ")])])]),e.loading?((0,a.uX)(),(0,a.CE)("div",L,t[23]||(t[23]=[(0,a.Lk)("div",{class:"spinner-border",role:"status"},[(0,a.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,a.Lk)("p",{class:"mt-2"},"Loading stations...",-1)]))):0===e.filteredStations.length?((0,a.uX)(),(0,a.CE)("div",v," No charging stations found. Please try different filters or add a new station. ")):((0,a.uX)(),(0,a.CE)("div",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.filteredStations,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:"col-md-6 col-lg-4 mb-4"},[(0,a.Lk)("div",h,[(0,a.Lk)("div",y,[(0,a.Lk)("h5",f,(0,n.v_)(e.name),1),(0,a.Lk)("span",{class:(0,n.C4)(Q.getStatusBadgeClass(e.status))},(0,n.v_)(e.status),3)]),(0,a.Lk)("div",w,[e.address?((0,a.uX)(),(0,a.CE)("p",C,[t[24]||(t[24]=(0,a.Lk)("i",{class:"bi bi-geo-alt"},null,-1)),(0,a.eW)(" "+(0,n.v_)(e.address),1)])):(0,a.Q3)("",!0),(0,a.Lk)("p",_,[t[25]||(t[25]=(0,a.Lk)("i",{class:"bi bi-lightning-charge"},null,-1)),(0,a.eW)(" "+(0,n.v_)(e.powerOutput)+" kW ",1)]),(0,a.Lk)("p",F,[t[26]||(t[26]=(0,a.Lk)("i",{class:"bi bi-plug"},null,-1)),(0,a.eW)(" "+(0,n.v_)(e.connectorType),1)]),e.pricePerKwh?((0,a.uX)(),(0,a.CE)("p",S,[t[27]||(t[27]=(0,a.Lk)("i",{class:"bi bi-currency-dollar"},null,-1)),(0,a.eW)(" "+(0,n.v_)(e.pricePerKwh)+" per kWh ",1)])):(0,a.Q3)("",!0),(0,a.Lk)("p",T,[(0,a.Lk)("small",null,"Added by: "+(0,n.v_)(e.owner?.username||"Unknown"),1)])]),(0,a.Lk)("div",D,[(0,a.Lk)("div",M,[(0,a.Lk)("button",{class:"btn btn-sm btn-outline-primary",onClick:t=>Q.viewOnMap(e)},t[28]||(t[28]=[(0,a.Lk)("i",{class:"bi bi-map"},null,-1),(0,a.eW)(" View on Map ")]),8,x),Q.canManageStation(e)?((0,a.uX)(),(0,a.CE)("div",P,[(0,a.bF)($,{to:`/stations/${e._id}/edit`,class:"btn btn-sm btn-outline-secondary me-1"},{default:(0,a.k6)((()=>t[29]||(t[29]=[(0,a.Lk)("i",{class:"bi bi-pencil"},null,-1),(0,a.eW)(" Edit ")]))),_:2,__:[29]},1032,["to"]),(0,a.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:t=>Q.confirmDelete(e)},t[30]||(t[30]=[(0,a.Lk)("i",{class:"bi bi-trash"},null,-1),(0,a.eW)(" Delete ")]),8,W)])):(0,a.Q3)("",!0)])])])])))),128))])),j.showDeleteModal?((0,a.uX)(),(0,a.CE)("div",E,[(0,a.Lk)("div",A,[(0,a.Lk)("div",X,[(0,a.Lk)("div",I,[t[31]||(t[31]=(0,a.Lk)("h5",{class:"modal-title"},"Confirm Delete",-1)),(0,a.Lk)("button",{type:"button",class:"btn-close",onClick:t[10]||(t[10]=e=>j.showDeleteModal=!1)})]),(0,a.Lk)("div",V,[(0,a.Lk)("p",null,'Are you sure you want to delete the charging station "'+(0,n.v_)(j.stationToDelete?.name)+'"?',1),t[32]||(t[32]=(0,a.Lk)("p",{class:"text-danger"},"This action cannot be undone.",-1))]),(0,a.Lk)("div",O,[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[11]||(t[11]=e=>j.showDeleteModal=!1)},"Cancel"),(0,a.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[12]||(t[12]=(...e)=>Q.handleStationDelete&&Q.handleStationDelete(...e))},"Delete")])])])])):(0,a.Q3)("",!0)])}var j=s(782);const Q={name:"StationList",data(){return{filters:{status:"",connectorType:"",minPower:"",maxPower:""},showDeleteModal:!1,stationToDelete:null}},computed:{...(0,j.L8)(["loading","filteredStations","isLoggedIn","user"])},methods:{...(0,j.i0)(["fetchStations","setFilters","resetFilters","deleteStation"]),applyFilters(){this.setFilters(this.filters)},getStatusBadgeClass(e){const t={Active:"badge bg-success",Inactive:"badge bg-secondary",Maintenance:"badge bg-warning text-dark"};return t[e]||"badge bg-secondary"},viewOnMap(e){this.$router.push({name:"MapView",query:{lat:e.location.latitude,lng:e.location.longitude,id:e._id}})},canManageStation(e){return!(!this.isLoggedIn||!this.user)&&(e.owner?._id===this.user._id||"admin"===this.user.role)},confirmDelete(e){this.stationToDelete=e,this.showDeleteModal=!0},redirectToLogin(){this.$router.push({name:"Login",query:{redirect:"/stations/new"}})},async handleStationDelete(){if(this.stationToDelete)try{await this.deleteStation(this.stationToDelete._id),this.showDeleteModal=!1,this.stationToDelete=null}catch(e){console.error("Error deleting station:",e)}}},created(){this.filters={...this.$store.getters.filters},this.fetchStations()}};var $=s(241);const B=(0,$.A)(Q,[["render",U],["__scopeId","data-v-6bd332a2"]]),K=B}}]);
//# sourceMappingURL=975.68d286d1.js.map