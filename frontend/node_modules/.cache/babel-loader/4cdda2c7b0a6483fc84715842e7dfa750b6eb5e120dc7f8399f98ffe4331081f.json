{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"map-view\"\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\nconst _hoisted_3 = {\n  class: \"col-md-8\"\n};\nconst _hoisted_4 = {\n  class: \"card mb-4\"\n};\nconst _hoisted_5 = {\n  class: \"card-body p-0\"\n};\nconst _hoisted_6 = {\n  id: \"map\",\n  ref: \"mapContainer\",\n  class: \"map-container\"\n};\nconst _hoisted_7 = {\n  class: \"col-md-4\"\n};\nconst _hoisted_8 = {\n  class: \"card mb-4\"\n};\nconst _hoisted_9 = {\n  class: \"card-body\"\n};\nconst _hoisted_10 = {\n  key: 0\n};\nconst _hoisted_11 = {\n  class: \"mb-2\"\n};\nconst _hoisted_12 = {\n  class: \"station-details\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"mb-2\"\n};\nconst _hoisted_14 = {\n  class: \"mb-2\"\n};\nconst _hoisted_15 = {\n  class: \"mb-2\"\n};\nconst _hoisted_16 = {\n  key: 1,\n  class: \"mb-2\"\n};\nconst _hoisted_17 = {\n  key: 2,\n  class: \"mb-2\"\n};\nconst _hoisted_18 = {\n  class: \"mb-2 text-muted\"\n};\nconst _hoisted_19 = {\n  key: 0,\n  class: \"mt-3\"\n};\nconst _hoisted_20 = {\n  key: 1,\n  class: \"text-center py-4\"\n};\nconst _hoisted_21 = {\n  class: \"card\"\n};\nconst _hoisted_22 = {\n  class: \"card-body\"\n};\nconst _hoisted_23 = {\n  class: \"mb-3\"\n};\nconst _hoisted_24 = {\n  class: \"mb-3\"\n};\nconst _hoisted_25 = {\n  key: 0,\n  class: \"modal fade show\",\n  style: {\n    \"display\": \"block\",\n    \"background-color\": \"rgba(0,0,0,0.5)\"\n  }\n};\nconst _hoisted_26 = {\n  class: \"modal-dialog\"\n};\nconst _hoisted_27 = {\n  class: \"modal-content\"\n};\nconst _hoisted_28 = {\n  class: \"modal-header\"\n};\nconst _hoisted_29 = {\n  class: \"modal-body\"\n};\nconst _hoisted_30 = {\n  class: \"modal-footer\"\n};\nexport function render(_ctx, _cache) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[35] || (_cache[35] = _createElementVNode(\"h2\", {\n    class: \"mb-3\"\n  }, \"Charging Stations Map\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" Map Container \"), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, null, 512 /* NEED_PATCH */)])])]), _createElementVNode(\"div\", _hoisted_7, [_createCommentVNode(\" Station Details Panel \"), _createElementVNode(\"div\", _hoisted_8, [_cache[27] || (_cache[27] = _createElementVNode(\"div\", {\n    class: \"card-header bg-primary text-white\"\n  }, [_createElementVNode(\"h5\", {\n    class: \"mb-0\"\n  }, \"Station Details\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_9, [_ctx.selectedStation ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"h4\", null, _toDisplayString(_ctx.selectedStation.name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"span\", {\n    class: _normalizeClass(_ctx.getStatusBadgeClass(_ctx.selectedStation.status))\n  }, _toDisplayString(_ctx.selectedStation.status), 3 /* TEXT, CLASS */)]), _createElementVNode(\"div\", _hoisted_12, [_ctx.selectedStation.address ? (_openBlock(), _createElementBlock(\"p\", _hoisted_13, [_cache[9] || (_cache[9] = _createElementVNode(\"i\", {\n    class: \"bi bi-geo-alt\"\n  }, null, -1 /* HOISTED */)), _cache[10] || (_cache[10] = _createTextVNode()), _cache[11] || (_cache[11] = _createElementVNode(\"strong\", null, \"Address:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(_ctx.selectedStation.address), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"p\", _hoisted_14, [_cache[12] || (_cache[12] = _createElementVNode(\"i\", {\n    class: \"bi bi-lightning-charge\"\n  }, null, -1 /* HOISTED */)), _cache[13] || (_cache[13] = _createTextVNode()), _cache[14] || (_cache[14] = _createElementVNode(\"strong\", null, \"Power Output:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(_ctx.selectedStation.powerOutput) + \" kW \", 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_15, [_cache[15] || (_cache[15] = _createElementVNode(\"i\", {\n    class: \"bi bi-plug\"\n  }, null, -1 /* HOISTED */)), _cache[16] || (_cache[16] = _createTextVNode()), _cache[17] || (_cache[17] = _createElementVNode(\"strong\", null, \"Connector Type:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(_ctx.selectedStation.connectorType), 1 /* TEXT */)]), _ctx.selectedStation.pricePerKwh ? (_openBlock(), _createElementBlock(\"p\", _hoisted_16, [_cache[18] || (_cache[18] = _createElementVNode(\"i\", {\n    class: \"bi bi-currency-dollar\"\n  }, null, -1 /* HOISTED */)), _cache[19] || (_cache[19] = _createTextVNode()), _cache[20] || (_cache[20] = _createElementVNode(\"strong\", null, \"Price:\", -1 /* HOISTED */)), _createTextVNode(\" $\" + _toDisplayString(_ctx.selectedStation.pricePerKwh) + \" per kWh \", 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _ctx.selectedStation.availableHours ? (_openBlock(), _createElementBlock(\"p\", _hoisted_17, [_cache[21] || (_cache[21] = _createElementVNode(\"i\", {\n    class: \"bi bi-clock\"\n  }, null, -1 /* HOISTED */)), _cache[22] || (_cache[22] = _createTextVNode()), _cache[23] || (_cache[23] = _createElementVNode(\"strong\", null, \"Hours:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(_ctx.selectedStation.availableHours.open) + \" - \" + _toDisplayString(_ctx.selectedStation.availableHours.close), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"p\", _hoisted_18, [_createElementVNode(\"small\", null, \"Added by: \" + _toDisplayString(_ctx.selectedStation.owner?.username || 'Unknown'), 1 /* TEXT */)])]), _ctx.canManageStation(_ctx.selectedStation) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_createVNode(_component_router_link, {\n    to: `/stations/${_ctx.selectedStation._id}/edit`,\n    class: \"btn btn-sm btn-outline-secondary me-1\"\n  }, {\n    default: _withCtx(() => _cache[24] || (_cache[24] = [_createElementVNode(\"i\", {\n      class: \"bi bi-pencil\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" Edit \")])),\n    _: 1 /* STABLE */,\n    __: [24]\n  }, 8 /* PROPS */, [\"to\"]), _createElementVNode(\"button\", {\n    class: \"btn btn-sm btn-outline-danger\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.confirmDelete(_ctx.selectedStation))\n  }, _cache[25] || (_cache[25] = [_createElementVNode(\"i\", {\n    class: \"bi bi-trash\"\n  }, null, -1 /* HOISTED */), _createTextVNode(\" Delete \")]))])) : _createCommentVNode(\"v-if\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_20, _cache[26] || (_cache[26] = [_createElementVNode(\"i\", {\n    class: \"bi bi-map display-4 text-muted\"\n  }, null, -1 /* HOISTED */), _createElementVNode(\"p\", {\n    class: \"mt-3\"\n  }, \"Select a station on the map to view details\", -1 /* HOISTED */)])))])]), _createCommentVNode(\" Filters Panel \"), _createElementVNode(\"div\", _hoisted_21, [_cache[32] || (_cache[32] = _createElementVNode(\"div\", {\n    class: \"card-header bg-light\"\n  }, [_createElementVNode(\"h5\", {\n    class: \"mb-0\"\n  }, \"Map Filters\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", _hoisted_23, [_cache[29] || (_cache[29] = _createElementVNode(\"label\", {\n    for: \"mapStatusFilter\",\n    class: \"form-label\"\n  }, \"Status\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"mapStatusFilter\",\n    class: \"form-select\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.mapFilters.status = $event),\n    onChange: _cache[2] || (_cache[2] = (...args) => _ctx.applyMapFilters && _ctx.applyMapFilters(...args))\n  }, _cache[28] || (_cache[28] = [_createElementVNode(\"option\", {\n    value: \"\"\n  }, \"All Statuses\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"Active\"\n  }, \"Active\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"Inactive\"\n  }, \"Inactive\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"Maintenance\"\n  }, \"Maintenance\", -1 /* HOISTED */)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, _ctx.mapFilters.status]])]), _createElementVNode(\"div\", _hoisted_24, [_cache[31] || (_cache[31] = _createElementVNode(\"label\", {\n    for: \"mapConnectorFilter\",\n    class: \"form-label\"\n  }, \"Connector Type\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"mapConnectorFilter\",\n    class: \"form-select\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.mapFilters.connectorType = $event),\n    onChange: _cache[4] || (_cache[4] = (...args) => _ctx.applyMapFilters && _ctx.applyMapFilters(...args))\n  }, _cache[30] || (_cache[30] = [_createStaticVNode(\"<option value=\\\"\\\" data-v-a774b752>All Connectors</option><option value=\\\"Type 1\\\" data-v-a774b752>Type 1</option><option value=\\\"Type 2\\\" data-v-a774b752>Type 2</option><option value=\\\"CCS\\\" data-v-a774b752>CCS</option><option value=\\\"CHAdeMO\\\" data-v-a774b752>CHAdeMO</option><option value=\\\"Tesla\\\" data-v-a774b752>Tesla</option>\", 6)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, _ctx.mapFilters.connectorType]])]), _createElementVNode(\"button\", {\n    class: \"btn btn-secondary w-100\",\n    onClick: _cache[5] || (_cache[5] = (...args) => _ctx.resetMapFilters && _ctx.resetMapFilters(...args))\n  }, \" Reset Filters \")])])])]), _createCommentVNode(\" Delete Confirmation Modal \"), _ctx.showDeleteModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [_createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"div\", _hoisted_27, [_createElementVNode(\"div\", _hoisted_28, [_cache[33] || (_cache[33] = _createElementVNode(\"h5\", {\n    class: \"modal-title\"\n  }, \"Confirm Delete\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn-close\",\n    onClick: _cache[6] || (_cache[6] = $event => _ctx.showDeleteModal = false)\n  })]), _createElementVNode(\"div\", _hoisted_29, [_createElementVNode(\"p\", null, \"Are you sure you want to delete the charging station \\\"\" + _toDisplayString(_ctx.stationToDelete?.name) + \"\\\"?\", 1 /* TEXT */), _cache[34] || (_cache[34] = _createElementVNode(\"p\", {\n    class: \"text-danger\"\n  }, \"This action cannot be undone.\", -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_30, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-secondary\",\n    onClick: _cache[7] || (_cache[7] = $event => _ctx.showDeleteModal = false)\n  }, \"Cancel\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-danger\",\n    onClick: _cache[8] || (_cache[8] = (...args) => _ctx.deleteSelectedStation && _ctx.deleteSelectedStation(...args))\n  }, \"Delete\")])])])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","id","ref","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createCommentVNode","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_ctx","selectedStation","_hoisted_10","_toDisplayString","name","_hoisted_11","_normalizeClass","getStatusBadgeClass","status","_hoisted_12","address","_hoisted_13","_hoisted_14","powerOutput","_hoisted_15","connectorType","pricePerKwh","_hoisted_16","availableHours","_hoisted_17","open","close","_hoisted_18","owner","username","canManageStation","_hoisted_19","_createVNode","_component_router_link","to","_id","_cache","onClick","$event","confirmDelete","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","for","mapFilters","onChange","args","applyMapFilters","value","_hoisted_24","resetMapFilters","showDeleteModal","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","type","_hoisted_29","stationToDelete","_hoisted_30","deleteSelectedStation"],"sources":["C:\\Users\\admin\\OneDrive\\Desktop\\3june\\frontend\\src\\views\\MapView.vue"],"sourcesContent":["<template>\n  <div class=\"map-view\">\n    <h2 class=\"mb-3\">Charging Stations Map</h2>\n    \n    <div class=\"row\">\n      <div class=\"col-md-8\">\n        <!-- Map Container -->\n        <div class=\"card mb-4\">\n          <div class=\"card-body p-0\">\n            <div id=\"map\" ref=\"mapContainer\" class=\"map-container\"></div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"col-md-4\">\n        <!-- Station Details Panel -->\n        <div class=\"card mb-4\">\n          <div class=\"card-header bg-primary text-white\">\n            <h5 class=\"mb-0\">Station Details</h5>\n          </div>\n          <div class=\"card-body\">\n            <div v-if=\"selectedStation\">\n              <h4>{{ selectedStation.name }}</h4>\n              <div class=\"mb-2\">\n                <span :class=\"getStatusBadgeClass(selectedStation.status)\">\n                  {{ selectedStation.status }}\n                </span>\n              </div>\n              \n              <div class=\"station-details\">\n                <p v-if=\"selectedStation.address\" class=\"mb-2\">\n                  <i class=\"bi bi-geo-alt\"></i> <strong>Address:</strong> {{ selectedStation.address }}\n                </p>\n                <p class=\"mb-2\">\n                  <i class=\"bi bi-lightning-charge\"></i> <strong>Power Output:</strong> {{ selectedStation.powerOutput }} kW\n                </p>\n                <p class=\"mb-2\">\n                  <i class=\"bi bi-plug\"></i> <strong>Connector Type:</strong> {{ selectedStation.connectorType }}\n                </p>\n                <p v-if=\"selectedStation.pricePerKwh\" class=\"mb-2\">\n                  <i class=\"bi bi-currency-dollar\"></i> <strong>Price:</strong> ${{ selectedStation.pricePerKwh }} per kWh\n                </p>\n                <p v-if=\"selectedStation.availableHours\" class=\"mb-2\">\n                  <i class=\"bi bi-clock\"></i> <strong>Hours:</strong> \n                  {{ selectedStation.availableHours.open }} - {{ selectedStation.availableHours.close }}\n                </p>\n                <p class=\"mb-2 text-muted\">\n                  <small>Added by: {{ selectedStation.owner?.username || 'Unknown' }}</small>\n                </p>\n              </div>\n              \n              <div class=\"mt-3\" v-if=\"canManageStation(selectedStation)\">\n                <router-link \n                  :to=\"`/stations/${selectedStation._id}/edit`\" \n                  class=\"btn btn-sm btn-outline-secondary me-1\"\n                >\n                  <i class=\"bi bi-pencil\"></i> Edit\n                </router-link>\n                <button \n                  class=\"btn btn-sm btn-outline-danger\"\n                  @click=\"confirmDelete(selectedStation)\"\n                >\n                  <i class=\"bi bi-trash\"></i> Delete\n                </button>\n              </div>\n            </div>\n            <div v-else class=\"text-center py-4\">\n              <i class=\"bi bi-map display-4 text-muted\"></i>\n              <p class=\"mt-3\">Select a station on the map to view details</p>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Filters Panel -->\n        <div class=\"card\">\n          <div class=\"card-header bg-light\">\n            <h5 class=\"mb-0\">Map Filters</h5>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"mb-3\">\n              <label for=\"mapStatusFilter\" class=\"form-label\">Status</label>\n              <select \n                id=\"mapStatusFilter\" \n                class=\"form-select\" \n                v-model=\"mapFilters.status\"\n                @change=\"applyMapFilters\"\n              >\n                <option value=\"\">All Statuses</option>\n                <option value=\"Active\">Active</option>\n                <option value=\"Inactive\">Inactive</option>\n                <option value=\"Maintenance\">Maintenance</option>\n              </select>\n            </div>\n            \n            <div class=\"mb-3\">\n              <label for=\"mapConnectorFilter\" class=\"form-label\">Connector Type</label>\n              <select \n                id=\"mapConnectorFilter\" \n                class=\"form-select\" \n                v-model=\"mapFilters.connectorType\"\n                @change=\"applyMapFilters\"\n              >\n                <option value=\"\">All Connectors</option>\n                <option value=\"Type 1\">Type 1</option>\n                <option value=\"Type 2\">Type 2</option>\n                <option value=\"CCS\">CCS</option>\n                <option value=\"CHAdeMO\">CHAdeMO</option>\n                <option value=\"Tesla\">Tesla</option>\n              </select>\n            </div>\n            \n            <button class=\"btn btn-secondary w-100\" @click=\"resetMapFilters\">\n              Reset Filters\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Delete Confirmation Modal -->\n    <div v-if=\"showDeleteModal\" class=\"modal fade show\" style=\"display: block; background-color: rgba(0,0,0,0.5)\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Confirm Delete</h5>\n            <button type=\"button\" class=\"btn-close\" @click=\"showDeleteModal = false\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <p>Are you sure you want to delete the charging station \"{{ stationToDelete?.name }}\"?</p>\n            <p class=\"text-danger\">This action cannot be undone.</p>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"showDeleteModal = false\">Cancel</button>\n            <button type=\"button\" class=\"btn btn-danger\" @click=\"deleteSelectedStation\">Delete</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\nexport default {\n  name: 'MapView',\n  data() {\n    return {\n      map: null,\n      markerLayer: null,\n      markers: {},\n      selectedStation: null,\n      showDeleteModal: false,\n      stationToDelete: null,\n      mapFilters: {\n        status: '',\n        connectorType: ''\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['allStations', 'loading', 'isLoggedIn', 'user']),\n    filteredMapStations() {\n      let filtered = [...this.allStations];\n      \n      if (this.mapFilters.status) {\n        filtered = filtered.filter(station => station.status === this.mapFilters.status);\n      }\n      \n      if (this.mapFilters.connectorType) {\n        filtered = filtered.filter(station => station.connectorType === this.mapFilters.connectorType);\n      }\n      \n      return filtered;\n    }\n  },\n  methods: {\n    ...mapActions(['fetchStations', 'deleteStation']),\n    \n    initializeMap() {\n      try {\n        mapboxgl.accessToken = this.mapboxToken;\n        \n        // Create a fallback style URL in case the default one fails\n        const styleUrl = 'mapbox://styles/mapbox/streets-v11';\n        const fallbackStyleUrl = 'mapbox://styles/mapbox/light-v10';\n        \n        this.map = new mapboxgl.Map({\n          container: this.$refs.mapContainer,\n          style: styleUrl,\n          center: [-98.5795, 39.8283], // Center of USA\n          zoom: 3\n        });\n        \n        // Handle style loading errors\n        this.map.on('error', (e) => {\n          console.warn('Mapbox error:', e);\n          if (e.error && e.error.status === 401 || e.error.status === 403) {\n            // Try fallback style if authentication fails\n            this.map.setStyle(fallbackStyleUrl);\n          }\n        });\n        \n        // Add navigation controls\n        this.map.addControl(new mapboxgl.NavigationControl());\n        \n        // Add geolocate control\n        this.map.addControl(\n          new mapboxgl.GeolocateControl({\n            positionOptions: {\n              enableHighAccuracy: true\n            },\n          trackUserLocation: true\n        })\n      );\n      \n      // Wait for map to load before adding markers\n      this.map.on('load', () => {\n        this.addMarkersToMap();\n        \n        // Check if there's a station ID in the query params\n        const { id, lat, lng } = this.$route.query;\n        if (id) {\n          const station = this.allStations.find(s => s._id === id);\n          if (station) {\n            this.selectStation(station);\n          }\n        } else if (lat && lng) {\n          // Center map on coordinates\n          this.map.flyTo({\n            center: [parseFloat(lng), parseFloat(lat)],\n            zoom: 15\n          });\n        }\n      });\n    },\n    \n    addMarkersToMap() {\n      // Clear existing markers\n      this.markers.forEach(marker => marker.remove());\n      this.markers = [];\n      \n      // Add markers for filtered stations\n      this.filteredMapStations.forEach(station => {\n        // Create marker element\n        const el = document.createElement('div');\n        el.className = 'marker';\n        el.style.backgroundColor = this.getMarkerColor(station.status);\n        el.style.width = '20px';\n        el.style.height = '20px';\n        el.style.borderRadius = '50%';\n        el.style.border = '2px solid white';\n        el.style.boxShadow = '0 0 5px rgba(0,0,0,0.3)';\n        \n        // Create popup\n        const popup = new mapboxgl.Popup({ offset: 25 }).setHTML(\n          `<strong>${station.name}</strong><br>\n          ${station.connectorType} - ${station.powerOutput} kW`\n        );\n        \n        // Create marker\n        const marker = new mapboxgl.Marker(el)\n          .setLngLat([station.location.longitude, station.location.latitude])\n          .setPopup(popup)\n          .addTo(this.map);\n        \n        // Add click event\n        marker.getElement().addEventListener('click', () => {\n          this.selectStation(station);\n        });\n        \n        this.markers.push(marker);\n      });\n      \n      // Fit map to markers if there are any\n      if (this.markers.length > 0) {\n        this.fitMapToMarkers();\n      }\n    },\n    \n    fitMapToMarkers() {\n      if (!this.map || this.markers.length === 0) return;\n      \n      const bounds = new mapboxgl.LngLatBounds();\n      \n      this.filteredMapStations.forEach(station => {\n        bounds.extend([station.location.longitude, station.location.latitude]);\n      });\n      \n      this.map.fitBounds(bounds, {\n        padding: 50,\n        maxZoom: 15\n      });\n    },\n    \n    selectStation(station) {\n      this.selectedStation = station;\n      \n      // Center map on selected station\n      this.map.flyTo({\n        center: [station.location.longitude, station.location.latitude],\n        zoom: 15\n      });\n    },\n    \n    getMarkerColor(status) {\n      const colors = {\n        'Active': '#28a745',\n        'Inactive': '#6c757d',\n        'Maintenance': '#ffc107'\n      };\n      return colors[status] || '#6c757d';\n    },\n    \n    getStatusBadgeClass(status) {\n      const classes = {\n        'Active': 'badge bg-success',\n        'Inactive': 'badge bg-secondary',\n        'Maintenance': 'badge bg-warning text-dark'\n      };\n      return classes[status] || 'badge bg-secondary';\n    },\n    \n    canManageStation(station) {\n      if (!this.isLoggedIn || !this.user) return false;\n      \n      // User can manage if they are the owner or an admin\n      return (station.owner?._id === this.user._id) || (this.user.role === 'admin');\n    },\n    \n    confirmDelete(station) {\n      this.stationToDelete = station;\n      this.showDeleteModal = true;\n    },\n    \n    async deleteSelectedStation() {\n      if (!this.stationToDelete) return;\n      \n      try {\n        await this.deleteStation(this.stationToDelete._id);\n        this.showDeleteModal = false;\n        this.stationToDelete = null;\n        this.selectedStation = null;\n      } catch (error) {\n        console.error('Error deleting station:', error);\n      }\n    },\n    \n    applyMapFilters() {\n      this.addMarkersToMap();\n    },\n    \n    resetMapFilters() {\n      this.mapFilters = {\n        status: '',\n        connectorType: ''\n      };\n      this.addMarkersToMap();\n    }\n  },\n  async mounted() {\n    await this.fetchStations();\n    this.initializeMap();\n  },\n  beforeUnmount() {\n    if (this.map) {\n      this.map.remove();\n    }\n  }\n}\n</script>\n\n<style scoped>\n@import url(\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css\");\n@import 'mapbox-gl/dist/mapbox-gl.css';\n\n.map-view {\n  padding-bottom: 2rem;\n}\n\n.map-container {\n  width: 100%;\n  height: 600px;\n  border-radius: 0.25rem;\n}\n\n.station-details i {\n  width: 20px;\n  text-align: center;\n  margin-right: 5px;\n}\n\n/* Modal backdrop */\n.modal {\n  backdrop-filter: blur(5px);\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAU;;EAGdA,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAU;;EAEdA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAe;;EACnBC,EAAE,EAAC,KAAK;EAACC,GAAG,EAAC,cAAc;EAACF,KAAK,EAAC;;;EAKxCA,KAAK,EAAC;AAAU;;EAEdA,KAAK,EAAC;AAAW;;EAIfA,KAAK,EAAC;AAAW;;;;;EAGbA,KAAK,EAAC;AAAM;;EAMZA,KAAK,EAAC;AAAiB;;;EACQA,KAAK,EAAC;;;EAGrCA,KAAK,EAAC;AAAM;;EAGZA,KAAK,EAAC;AAAM;;;EAGuBA,KAAK,EAAC;;;;EAGHA,KAAK,EAAC;;;EAI5CA,KAAK,EAAC;AAAiB;;;EAKvBA,KAAK,EAAC;;;;EAeDA,KAAK,EAAC;;;EAQjBA,KAAK,EAAC;AAAM;;EAIVA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAM;;EAeZA,KAAK,EAAC;AAAM;;;EA0BGA,KAAK,EAAC,iBAAiB;EAACG,KAAyD,EAAzD;IAAA;IAAA;EAAA;;;EAC7CH,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAc;;EAIpBA,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAc;;;uBAlIjCI,mBAAA,CAyIM,OAzINC,UAyIM,G,4BAxIJC,mBAAA,CAA2C;IAAvCN,KAAK,EAAC;EAAM,GAAC,uBAAqB,sBAEtCM,mBAAA,CAiHM,OAjHNC,UAiHM,GAhHJD,mBAAA,CAOM,OAPNE,UAOM,GANJC,mBAAA,mBAAsB,EACtBH,mBAAA,CAIM,OAJNI,UAIM,GAHJJ,mBAAA,CAEM,OAFNK,UAEM,GADJL,mBAAA,CAA6D,OAA7DM,UAA6D,8B,OAKnEN,mBAAA,CAsGM,OAtGNO,UAsGM,GArGJJ,mBAAA,2BAA8B,EAC9BH,mBAAA,CAuDM,OAvDNQ,UAuDM,G,4BAtDJR,mBAAA,CAEM;IAFDN,KAAK,EAAC;EAAmC,IAC5CM,mBAAA,CAAqC;IAAjCN,KAAK,EAAC;EAAM,GAAC,iBAAe,E,sBAElCM,mBAAA,CAkDM,OAlDNS,UAkDM,GAjDOC,IAAA,CAAAC,eAAe,I,cAA1Bb,mBAAA,CA4CM,OAAAc,WAAA,GA3CJZ,mBAAA,CAAmC,YAAAa,gBAAA,CAA5BH,IAAA,CAAAC,eAAe,CAACG,IAAI,kBAC3Bd,mBAAA,CAIM,OAJNe,WAIM,GAHJf,mBAAA,CAEO;IAFAN,KAAK,EAAAsB,eAAA,CAAEN,IAAA,CAAAO,mBAAmB,CAACP,IAAA,CAAAC,eAAe,CAACO,MAAM;sBACnDR,IAAA,CAAAC,eAAe,CAACO,MAAM,wB,GAI7BlB,mBAAA,CAoBM,OApBNmB,WAoBM,GAnBKT,IAAA,CAAAC,eAAe,CAACS,OAAO,I,cAAhCtB,mBAAA,CAEI,KAFJuB,WAEI,G,0BADFrB,mBAAA,CAA6B;IAA1BN,KAAK,EAAC;EAAe,6B,6EAAMM,mBAAA,CAAyB,gBAAjB,UAAQ,sB,iBAAS,GAAC,GAAAa,gBAAA,CAAGH,IAAA,CAAAC,eAAe,CAACS,OAAO,iB,wCAEpFpB,mBAAA,CAEI,KAFJsB,WAEI,G,4BADFtB,mBAAA,CAAsC;IAAnCN,KAAK,EAAC;EAAwB,6B,6EAAMM,mBAAA,CAA8B,gBAAtB,eAAa,sB,iBAAS,GAAC,GAAAa,gBAAA,CAAGH,IAAA,CAAAC,eAAe,CAACY,WAAW,IAAG,MACzG,gB,GACAvB,mBAAA,CAEI,KAFJwB,WAEI,G,4BADFxB,mBAAA,CAA0B;IAAvBN,KAAK,EAAC;EAAY,6B,6EAAMM,mBAAA,CAAgC,gBAAxB,iBAAe,sB,iBAAS,GAAC,GAAAa,gBAAA,CAAGH,IAAA,CAAAC,eAAe,CAACc,aAAa,iB,GAErFf,IAAA,CAAAC,eAAe,CAACe,WAAW,I,cAApC5B,mBAAA,CAEI,KAFJ6B,WAEI,G,4BADF3B,mBAAA,CAAqC;IAAlCN,KAAK,EAAC;EAAuB,6B,6EAAMM,mBAAA,CAAuB,gBAAf,QAAM,sB,iBAAS,IAAE,GAAAa,gBAAA,CAAGH,IAAA,CAAAC,eAAe,CAACe,WAAW,IAAG,WAClG,gB,wCACShB,IAAA,CAAAC,eAAe,CAACiB,cAAc,I,cAAvC9B,mBAAA,CAGI,KAHJ+B,WAGI,G,4BAFF7B,mBAAA,CAA2B;IAAxBN,KAAK,EAAC;EAAa,6B,6EAAMM,mBAAA,CAAuB,gBAAf,QAAM,sB,iBAAS,GACnD,GAAAa,gBAAA,CAAGH,IAAA,CAAAC,eAAe,CAACiB,cAAc,CAACE,IAAI,IAAG,KAAG,GAAAjB,gBAAA,CAAGH,IAAA,CAAAC,eAAe,CAACiB,cAAc,CAACG,KAAK,iB,wCAErF/B,mBAAA,CAEI,KAFJgC,WAEI,GADFhC,mBAAA,CAA2E,eAApE,YAAU,GAAAa,gBAAA,CAAGH,IAAA,CAAAC,eAAe,CAACsB,KAAK,EAAEC,QAAQ,8B,KAI/BxB,IAAA,CAAAyB,gBAAgB,CAACzB,IAAA,CAAAC,eAAe,K,cAAxDb,mBAAA,CAaM,OAbNsC,WAaM,GAZJC,YAAA,CAKcC,sBAAA;IAJXC,EAAE,eAAe7B,IAAA,CAAAC,eAAe,CAAC6B,GAAG;IACrC9C,KAAK,EAAC;;sBAEN,MAA4B+C,MAAA,SAAAA,MAAA,QAA5BzC,mBAAA,CAA4B;MAAzBN,KAAK,EAAC;IAAc,4B,iBAAK,QAC9B,E;;;6BACAM,mBAAA,CAKS;IAJPN,KAAK,EAAC,+BAA+B;IACpCgD,OAAK,EAAAD,MAAA,QAAAA,MAAA,MAAAE,MAAA,IAAEjC,IAAA,CAAAkC,aAAa,CAAClC,IAAA,CAAAC,eAAe;kCAErCX,mBAAA,CAA2B;IAAxBN,KAAK,EAAC;EAAa,4B,iBAAK,UAC7B,E,8DAGJI,mBAAA,CAGM,OAHN+C,WAGM,EAAAJ,MAAA,SAAAA,MAAA,QAFJzC,mBAAA,CAA8C;IAA3CN,KAAK,EAAC;EAAgC,4BACzCM,mBAAA,CAA+D;IAA5DN,KAAK,EAAC;EAAM,GAAC,6CAA2C,oB,SAKjES,mBAAA,mBAAsB,EACtBH,mBAAA,CAyCM,OAzCN8C,WAyCM,G,4BAxCJ9C,mBAAA,CAEM;IAFDN,KAAK,EAAC;EAAsB,IAC/BM,mBAAA,CAAiC;IAA7BN,KAAK,EAAC;EAAM,GAAC,aAAW,E,sBAE9BM,mBAAA,CAoCM,OApCN+C,WAoCM,GAnCJ/C,mBAAA,CAaM,OAbNgD,WAaM,G,4BAZJhD,mBAAA,CAA8D;IAAvDiD,GAAG,EAAC,iBAAiB;IAACvD,KAAK,EAAC;KAAa,QAAM,sB,gBACtDM,mBAAA,CAUS;IATPL,EAAE,EAAC,iBAAiB;IACpBD,KAAK,EAAC,aAAa;+DACVgB,IAAA,CAAAwC,UAAU,CAAChC,MAAM,GAAAyB,MAAA;IACzBQ,QAAM,EAAAV,MAAA,QAAAA,MAAA,UAAAW,IAAA,KAAE1C,IAAA,CAAA2C,eAAA,IAAA3C,IAAA,CAAA2C,eAAA,IAAAD,IAAA,CAAe;kCAExBpD,mBAAA,CAAsC;IAA9BsD,KAAK,EAAC;EAAE,GAAC,cAAY,qBAC7BtD,mBAAA,CAAsC;IAA9BsD,KAAK,EAAC;EAAQ,GAAC,QAAM,qBAC7BtD,mBAAA,CAA0C;IAAlCsD,KAAK,EAAC;EAAU,GAAC,UAAQ,qBACjCtD,mBAAA,CAAgD;IAAxCsD,KAAK,EAAC;EAAa,GAAC,aAAW,oB,2DAN9B5C,IAAA,CAAAwC,UAAU,CAAChC,MAAM,E,KAU9BlB,mBAAA,CAeM,OAfNuD,WAeM,G,4BAdJvD,mBAAA,CAAyE;IAAlEiD,GAAG,EAAC,oBAAoB;IAACvD,KAAK,EAAC;KAAa,gBAAc,sB,gBACjEM,mBAAA,CAYS;IAXPL,EAAE,EAAC,oBAAoB;IACvBD,KAAK,EAAC,aAAa;+DACVgB,IAAA,CAAAwC,UAAU,CAACzB,aAAa,GAAAkB,MAAA;IAChCQ,QAAM,EAAAV,MAAA,QAAAA,MAAA,UAAAW,IAAA,KAAE1C,IAAA,CAAA2C,eAAA,IAAA3C,IAAA,CAAA2C,eAAA,IAAAD,IAAA,CAAe;mcADf1C,IAAA,CAAAwC,UAAU,CAACzB,aAAa,E,KAYrCzB,mBAAA,CAES;IAFDN,KAAK,EAAC,yBAAyB;IAAEgD,OAAK,EAAAD,MAAA,QAAAA,MAAA,UAAAW,IAAA,KAAE1C,IAAA,CAAA8C,eAAA,IAAA9C,IAAA,CAAA8C,eAAA,IAAAJ,IAAA,CAAe;KAAE,iBAEjE,E,SAMRjD,mBAAA,+BAAkC,EACvBO,IAAA,CAAA+C,eAAe,I,cAA1B3D,mBAAA,CAiBM,OAjBN4D,WAiBM,GAhBJ1D,mBAAA,CAeM,OAfN2D,WAeM,GAdJ3D,mBAAA,CAaM,OAbN4D,WAaM,GAZJ5D,mBAAA,CAGM,OAHN6D,WAGM,G,4BAFJ7D,mBAAA,CAA2C;IAAvCN,KAAK,EAAC;EAAa,GAAC,gBAAc,sBACtCM,mBAAA,CAAkF;IAA1E8D,IAAI,EAAC,QAAQ;IAACpE,KAAK,EAAC,WAAW;IAAEgD,OAAK,EAAAD,MAAA,QAAAA,MAAA,MAAAE,MAAA,IAAEjC,IAAA,CAAA+C,eAAe;QAEjEzD,mBAAA,CAGM,OAHN+D,WAGM,GAFJ/D,mBAAA,CAA0F,WAAvF,yDAAsD,GAAAa,gBAAA,CAAGH,IAAA,CAAAsD,eAAe,EAAElD,IAAI,IAAG,KAAE,iB,4BACtFd,mBAAA,CAAwD;IAArDN,KAAK,EAAC;EAAa,GAAC,+BAA6B,qB,GAEtDM,mBAAA,CAGM,OAHNiE,WAGM,GAFJjE,mBAAA,CAAgG;IAAxF8D,IAAI,EAAC,QAAQ;IAACpE,KAAK,EAAC,mBAAmB;IAAEgD,OAAK,EAAAD,MAAA,QAAAA,MAAA,MAAAE,MAAA,IAAEjC,IAAA,CAAA+C,eAAe;KAAU,QAAM,GACvFzD,mBAAA,CAA2F;IAAnF8D,IAAI,EAAC,QAAQ;IAACpE,KAAK,EAAC,gBAAgB;IAAEgD,OAAK,EAAAD,MAAA,QAAAA,MAAA,UAAAW,IAAA,KAAE1C,IAAA,CAAAwD,qBAAA,IAAAxD,IAAA,CAAAwD,qBAAA,IAAAd,IAAA,CAAqB;KAAE,QAAM,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}